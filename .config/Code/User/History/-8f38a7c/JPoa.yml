version: "3.8"
services:
  influxdb:
    image: "influxdb:latest"
    container_name: influxdb
    ports: 
        - "8086:8086"
    volumes:
        - "./influx-data:/var/lib/influxdb"
    networks:
        - TICKnetwork
        
  chronograf:
    image: "chronograf:latest"
    container_name: chronograf
    ports: 
        - "8888:8888"
    volumes: 
        - "./chronograf-data:/var/lib/chronograf"
    networks:
        - TICKnetwork

  telegraf:
    image: "telegraf:latest"
    container_name: telegraf
    volumes:
        - ./telegraf/etc/telegraf.conf:/etc/telegraf/telegraf.conf
    networks:
        - TICKnetwork

  kapacitor:
    image: "kapacitor:latest"
    container_name: kapacitor
    volumes: 
        # - "./kapacitor-data:/var/lib/kapacitor"
        - ./kapacitor-data/etc/kapacitor.conf:/etc/kapacitor/kapacitor.conf

    environment: 
        - KAPACITOR_INFLUXDB_0_URLS_0=http://XXXXXXXXXXX:8086
        - KAPACITOR_INFLUXDB_ENABLED=true
        - KAPACITOR_INFLUXDB_NAME=monitoring
        - KAPACITOR_INFLUXDB_0_USERNAME=XXXXXXXXXXXX
        - KAPACITOR_INFLUXDB_0_PASSWORD=XXXXXXXXXXXX
    ports:
        - "9092:9092"
    networks:
        - TICKnetwork

volumes:
    telegraf-data: 
    chronograf-data:
    influx-data:
    kapacitor-data:

networks:
    monitornet:

